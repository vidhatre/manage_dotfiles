#!/usr/bin/env bash

set -euo pipefail
IFS=$'\n\t'

RED='\033[0;31m'
NC='\033[0m' # No Color
server_text="${RED}[%s]${NC}"
#server_text="[%s]"

# jenkins-hosts
hosts=( axdev-amalthea
        axdev-thebe
        axdev-callisto
        axdev-ducati
        axdev-europa
        axdev-ganymede
        axdev-halimede
        axdev-jupiter
        axdev-leda
        axdev-metis
        axdev-moria
        axdev-trex
        axdev-alamo
        micron-ubuntu
        micron4u-ubuntu
        axdev-jsc
        axdev-rc1
        )

printf -v line '=%.0s' {1..50}
for host in ${hosts[@]}; do
  printf "$server_text %s\n" $host ${line:${#host}}
  ssh jenkins@${host} $@ || :
done

